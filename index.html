<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeamTodo - 협업용 할 일 관리</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
    <link rel="stylesheet" href="styles.css">
    <script>
        // Supabase 클라이언트 글로벌 변수 초기화
        var supabaseJs = window.supabase;
    </script>
    <!-- 환경 설정 파일 로드 -->
    <script src="config.js"></script>
</head>
<body>
    <div id="loading" class="loading hidden">
        <div class="spinner"></div>
        <h2>TeamTodo 로딩 중...</h2>
        <p>잠시만 기다려주세요</p>
    </div>

    <div id="loginContainer" class="landing-page flex">
        <section class="hero-section">
            <div class="hero-background">
                <div class="hero-shapes">
                    <div class="shape shape-1"></div>
                    <div class="shape shape-2"></div>
                    <div class="shape shape-3"></div>
                </div>
            </div>
            
            <div class="hero-content">
                <div class="hero-text">
                    <div class="brand-header">
                        <div class="brand-icon">📋</div>
                        <h1 class="brand-title">TeamTodo</h1>
                    </div>
                    
                    <h2 class="hero-headline">
                        팀과 함께하는<br>
                        <span class="gradient-text">스마트한 할 일 관리</span>
                    </h2>
                    
                    <p class="hero-description">
                        실시간 협업, 댓글 시스템, 프로젝트 관리까지.<br>
                        소규모 팀을 위한 올인원 할 일 관리 플랫폼
                    </p>
                    
                    <div class="hero-stats">
                        <div class="stat-item">
                            <div class="stat-number">10</div>
                            <div class="stat-label">팀원</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">∞</div>
                            <div class="stat-label">프로젝트</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">실시간</div>
                            <div class="stat-label">협업</div>
                        </div>
                    </div>
                    
                    <div class="hero-cta">
                        <button class="cta-primary" id="login-btn" onclick="handleLoginClick()">
                            🔑 로그인
                        </button>
                        <button class="cta-secondary" id="demo-btn" onclick="handleDemoClick()">
                            ✨ 데모 체험하기
                        </button>
                    </div>
                </div>
                
                <div class="hero-visual">
                    <div class="dashboard-preview">
                        <div class="preview-header">
                            <div class="preview-dots">
                                <span></span><span></span><span></span>
                            </div>
                            <div class="preview-title">TeamTodo Dashboard</div>
                        </div>
                        <div class="preview-content">
                            <div class="preview-stats">
                                <div class="mini-stat">
                                    <div class="mini-number">12</div>
                                    <div class="mini-label">전체</div>
                                </div>
                                <div class="mini-stat">
                                    <div class="mini-number">8</div>
                                    <div class="mini-label">진행중</div>
                                </div>
                                <div class="mini-stat">
                                    <div class="mini-number">4</div>
                                    <div class="mini-label">완료</div>
                                </div>
                            </div>
                            <div class="preview-todos">
                                <div class="mini-todo">
                                    <div class="todo-indicator"></div>
                                    <div class="todo-text">UI 디자인 개선</div>
                                    <div class="todo-comment">💬 3</div>
                                </div>
                                <div class="mini-todo">
                                    <div class="todo-indicator completed"></div>
                                    <div class="todo-text">데이터베이스 설계</div>
                                    <div class="todo-status">✅</div>
                                </div>
                                <div class="mini-todo">
                                    <div class="todo-indicator"></div>
                                    <div class="todo-text">API 개발</div>
                                    <div class="todo-comment">💬 1</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="features-section">
            <div class="features-container">
                <h2 class="features-title">팀 협업의 새로운 기준</h2>
                <p class="features-subtitle">TeamTodo로 팀의 생산성을 극대화하세요</p>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">📊</div>
                        <h3>실시간 대시보드</h3>
                        <p>팀의 진행 상황을 한눈에 파악하고 병목 구간을 즉시 발견하세요</p>
                        <div class="feature-highlight">클릭 한 번으로 필터링</div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">💬</div>
                        <h3>할 일별 댓글</h3>
                        <p>각 할 일에서 팀원들과 실시간으로 소통하고 진행 상황을 공유하세요</p>
                        <div class="feature-highlight">실시간 알림</div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">📁</div>
                        <h3>프로젝트 관리</h3>
                        <p>다양한 프로젝트를 색상별로 구분하고 체계적으로 관리하세요</p>
                        <div class="feature-highlight">시각적 구분</div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">📅</div>
                        <h3>스마트 캘린더</h3>
                        <p>월별/주별 뷰로 할 일을 확인하고 마감일을 놓치지 마세요</p>
                        <div class="feature-highlight">직관적 인터페이스</div>
                    </div>
                </div>
            </div>
        </section>
        
        <div id="loginModal" class="login-modal hidden">
            <div class="modal-backdrop" onclick="hideLoginModal()"></div>
            <div class="login-card">
                <div class="login-header">
                    <h2>TeamTodo 시작하기</h2>
                    <button class="close-btn" onclick="hideLoginModal()">×</button>
                </div>
                
                <div class="login-modes">
                    <button class="mode-btn active" onclick="switchLoginMode('email')">로그인</button>
                    <button class="mode-btn" onclick="switchLoginMode('signup')">회원가입</button>
                </div>
                
                <div id="emailLoginForm" class="login-form">
                    <input type="email" id="loginEmail" class="login-input" placeholder="이메일 주소" required>
                    <input type="password" id="loginPassword" class="login-input" placeholder="비밀번호" required>
                    <button id="emailLoginBtn" class="login-btn" onclick="loginWithEmail()">로그인</button>
                </div>
                
                <div id="signupForm" class="login-form hidden">
                    <input type="text" id="signupName" class="login-input" placeholder="이름" required>
                    <input type="email" id="signupEmail" class="login-input" placeholder="이메일 주소" required>
                    <input type="password" id="signupPassword" class="login-input" placeholder="비밀번호 (6자 이상)" required>
                    <input type="password" id="signupPasswordConfirm" class="login-input" placeholder="비밀번호 확인" required>
                    <button id="signupBtn" class="login-btn" onclick="signupWithEmail()">회원가입</button>
                </div>
                
                <div class="login-divider">
                    <span>또는</span>
                </div>
                
                <button id="googleLoginBtn" class="login-btn secondary" onclick="loginWithGoogle()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                        <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                        <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                        <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                    </svg>
                    Google로 계속하기
                </button>
            </div>
        </div>
    </div>
    
    <div id="approvalPendingContainer" class="landing-page hidden">
        <section class="hero-section">
            <div class="hero-background">
                <div class="hero-shapes">
                    <div class="shape shape-1"></div>
                    <div class="shape shape-2"></div>
                    <div class="shape shape-3"></div>
                </div>
            </div>
            <div class="container">
                <div class="approval-status-box">
                    <div class="approval-icon pending">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2"/>
                            <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <h2>승인 대기 중</h2>
                    <p class="approval-message">
                        <span id="pendingUserEmail">사용자</span> 계정이 관리자 승인을 기다리고 있습니다.
                    </p>
                    <p class="approval-desc">
                        승인이 완료되면 서비스를 이용하실 수 있습니다.<br>
                        관리자에게 승인 요청 메시지를 보내셨다면, 잠시 기다려 주세요.
                    </p>
                    <div class="approval-actions">
                        <button onclick="handleLogout()" class="btn-secondary">
                            로그아웃
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <div id="approvalRejectedContainer" class="landing-page hidden">
        <section class="hero-section">
            <div class="hero-background">
                <div class="hero-shapes">
                    <div class="shape shape-1"></div>
                    <div class="shape shape-2"></div>
                    <div class="shape shape-3"></div>
                </div>
            </div>
            <div class="container">
                <div class="approval-status-box">
                    <div class="approval-icon rejected">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2"/>
                            <path d="M15 9L9 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M9 9L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <h2>승인 거부됨</h2>
                    <p class="approval-message">
                        <span id="rejectedUserEmail">사용자</span> 계정의 가입 요청이 거부되었습니다.
                    </p>
                    <p class="approval-desc">
                        자세한 내용은 관리자에게 문의해 주세요.<br>
                        다른 계정으로 로그인하시려면 로그아웃 후 다시 시도해 주세요.
                    </p>
                    <div class="approval-actions">
                        <button onclick="handleLogout()" class="btn-secondary">
                            로그아웃
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <div id="accountSuspendedContainer" class="landing-page hidden">
        <section class="hero-section">
            <div class="hero-background">
                <div class="hero-shapes">
                    <div class="shape shape-1"></div>
                    <div class="shape shape-2"></div>
                    <div class="shape shape-3"></div>
                </div>
            </div>
            <div class="container">
                <div class="approval-status-box">
                    <div class="approval-icon suspended">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2"/>
                            <path d="M12 8V12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M12 16V16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <h2>계정 정지됨</h2>
                    <p class="approval-message">
                        <span id="suspendedUserEmail">사용자</span> 계정이 현재 정지 상태입니다.
                    </p>
                    <p class="approval-desc">
                        계정 정지 사유에 대해서는 관리자에게 문의해 주세요.<br>
                        정지가 해제되면 다시 서비스를 이용하실 수 있습니다.
                    </p>
                    <div class="approval-actions">
                        <button onclick="handleLogout()" class="btn-secondary">
                            로그아웃
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div id="appContainer" class="app-container">
        <div class="header">
            <div class="logo">
                📋 TeamTodo
                <span id="realtimeStatusIndicator" class="realtime-status connected hidden">
                    실시간 연결됨
                </span>
            </div>
            <div class="user-info">
                <div id="userAvatar" class="user-avatar"></div>
                <span id="userName"></span>
                <button id="resetDataBtn" class="reset-data-btn" title="데모 데이터 초기화">🔄 데이터 초기화</button>
                <button id="logoutBtn" class="logout-btn">로그아웃</button>
            </div>
        </div>

        <div class="nav-container">
            <div class="nav-tabs">
                <button class="nav-tab active disabled" onclick="showSection('dashboard')" title="승인된 사용자만 사용 가능합니다">대시보드</button>
                <button class="nav-tab disabled" onclick="showSection('projects')" title="승인된 사용자만 사용 가능합니다">프로젝트</button>
                <button class="nav-tab disabled" onclick="showSection('todos')" title="승인된 사용자만 사용 가능합니다">할 일 관리</button>
                <button class="nav-tab disabled" onclick="showSection('calendar')" title="승인된 사용자만 사용 가능합니다">달력</button>
                <button id="adminNavTab" class="nav-tab hidden" onclick="showSection('admin')">👑 관리자</button>
            </div>
        </div>

        <div class="content-container">
            <div id="dashboard" class="content-section active">
                <div class="dashboard-header">
                    <div>
                        <h2 class="section-title">📊 대시보드</h2>
                        <p class="section-subtitle">프로젝트 현황과 할 일을 한눈에 확인하세요</p>
                    </div>
                    <div class="dashboard-filters">
                        <select id="dashboardProjectFilter" onchange="filterDashboardByProject()" class="dashboard-select">
                            <option value="">모든 프로젝트</option>
                        </select>
                    </div>
                </div>
                
                <div id="dashboardStats" class="dashboard-stats">
                    </div>
                
                <div class="dashboard-todos-section">
                    <div class="todos-section-header">
                        <h3>📋 할 일 목록</h3>
                        <span id="dashboardTodoCount" class="todo-count-badge">0개</span>
                    </div>
                    <div id="dashboardTodosList" class="dashboard-todos-list">
                        </div>
                </div>
            </div>

            <div id="projects" class="content-section">
                <div class="projects-header">
                    <div class="projects-title-area">
                        <h2 class="section-title">📁 프로젝트</h2>
                        <p class="section-subtitle">프로젝트별로 할 일을 체계적으로 관리하세요</p>
                    </div>
                    <button onclick="showCreateProjectModal()" class="btn-create-project">
                        + 새 프로젝트
                    </button>
                </div>
                
                <div class="project-tabs-container">
                    <div class="project-tabs" id="projectsTabs">
                        <button class="project-tab active" onclick="selectProjectTab('all')">
                            📂 전체 프로젝트
                        </button>
                        </div>
                </div>
                
                <div class="project-content" id="projectContent">
                    <div class="project-overview">
                        <div class="project-stats-grid">
                            <div class="project-stat-card">
                                <div class="stat-icon">📊</div>
                                <div class="stat-info">
                                    <div class="stat-number" id="projectTotalTodos">0</div>
                                    <div class="stat-label">전체 할 일</div>
                                </div>
                            </div>
                            <div class="project-stat-card">
                                <div class="stat-icon">⏳</div>
                                <div class="stat-info">
                                    <div class="stat-number" id="projectInProgressTodos">0</div>
                                    <div class="stat-label">진행 중</div>
                                </div>
                            </div>
                            <div class="project-stat-card">
                                <div class="stat-icon">✅</div>
                                <div class="stat-info">
                                    <div class="stat-number" id="projectCompletedTodos">0</div>
                                    <div class="stat-label">완료됨</div>
                                </div>
                            </div>
                            <div class="project-stat-card">
                                <div class="stat-icon">🎯</div>
                                <div class="stat-info">
                                    <div class="stat-number" id="projectProgress">0%</div>
                                    <div class="stat-label">진행률</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="todos" class="content-section">
                <div class="todos-header">
                    <div>
                        <h2 class="section-title">✅ 할 일 관리</h2>
                        <p class="section-subtitle">프로젝트별로 할 일을 체계적으로 관리하세요</p>
                    </div>
                    <div class="todos-controls">
                        <button onclick="showCreateProjectModal()" class="btn-secondary-modern">
                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9 1.5V16.5M1.5 9H16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            새 프로젝트
                        </button>
                        <select id="projectFilter" onchange="filterTodosByProject()" class="project-select">
                            <option value="">모든 프로젝트</option>
                        </select>
                        <div class="todos-stats">
                            <div class="stat-item">
                                <span class="stat-number" id="totalTodos">0</span>
                                <span class="stat-label">전체</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="completedTodos">0</span>
                                <span class="stat-label">완료</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="completionRate">0%</span>
                                <span class="stat-label">완료율</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="add-todo-form-container">
                    <div class="add-todo-form">
                        <div class="form-header">
                            <h3>새 할일 추가</h3>
                        </div>
                        <div class="form-body">
                            <div class="form-group">
                                <label for="todoProject" class="form-label">프로젝트 <span class="required">*</span></label>
                                <select id="todoProject" class="form-input enhanced-select">
                                    <option value="">프로젝트를 선택하세요</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="todoTitle" class="form-label">할일 제목 <span class="required">*</span></label>
                                <input type="text" id="todoTitle" placeholder="할 일 제목을 입력하세요" class="form-input">
                            </div>
                            
                            <div class="form-group">
                                <label for="todoDesc" class="form-label">상세 설명</label>
                                <textarea id="todoDesc" placeholder="상세 설명 (선택사항)" class="form-textarea" rows="3"></textarea>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group half">
                                    <label for="todoStartDate" class="form-label">시작일</label>
                                    <div class="date-input-wrapper">
                                        <input type="text" id="todoStartDate" placeholder="시작일 선택" class="form-input date-picker">
                                        <span class="date-icon">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M8 2V6M16 2V6M3 10H21M5 4H19C20.1046 4 21 4.89543 21 6V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V6C3 4.89543 3.89543 4 5 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group half">
                                    <label for="todoDueDate" class="form-label">마감일</label>
                                    <div class="date-input-wrapper">
                                        <input type="text" id="todoDueDate" placeholder="마감일 선택" class="form-input date-picker">
                                        <span class="date-icon">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M8 2V6M16 2V6M3 10H21M5 4H19C20.1046 4 21 4.89543 21 6V20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V6C3 4.89543 3.89543 4 5 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="todoPriority" class="form-label">우선순위</label>
                                <select id="todoPriority" class="form-input enhanced-select">
                                    <option value="low">🟢 낮은 우선순위</option>
                                    <option value="medium" selected>🟡 보통 우선순위</option>
                                    <option value="high">🔴 높은 우선순위</option>
                                </select>
                            </div>
                            
                            <div class="form-actions">
                                <button onclick="addTodo()" class="btn-primary-modern add-todo-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 6V18M6 12H18" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                    할일 추가
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="todoList" class="todo-list">
                    </div>
            </div>

            <div id="calendar" class="content-section">
                <div class="calendar-header">
                    <div>
                        <h2 class="section-title">📅 달력</h2>
                        <p class="section-subtitle">일정과 마감일을 달력에서 확인하세요</p>
                    </div>
                    <div class="calendar-controls">
                        <div class="view-toggles">
                            <button id="monthViewBtn" onclick="switchCalendarView('month')" class="view-btn active">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="btn-icon">
                                    <rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                                    <path d="M3 10H21" stroke="currentColor" stroke-width="2"/>
                                    <path d="M9 3V7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M15 3V7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                월간
                            </button>
                            <button id="weekViewBtn" onclick="switchCalendarView('week')" class="view-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="btn-icon">
                                    <rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                                    <path d="M3 10H21" stroke="currentColor" stroke-width="2"/>
                                    <path d="M8 14H10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M14 14H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M8 18H10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M14 18H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                주간
                            </button>
                        </div>
                        <div class="navigation-controls">
                            <button onclick="previousPeriod()" class="btn-icon" title="이전">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                            <span id="currentPeriod" class="current-period"></span>
                            <button onclick="nextPeriod()" class="btn-icon" title="다음">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9 6L15 12L9 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                            <button onclick="goToToday()" class="btn-today">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                                    <path d="M12 7V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                오늘
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="calendar-view">
                    <div class="calendar-weekdays">
                        <div class="weekday">일</div>
                        <div class="weekday">월</div>
                        <div class="weekday">화</div>
                        <div class="weekday">수</div>
                        <div class="weekday">목</div>
                        <div class="weekday">금</div>
                        <div class="weekday">토</div>
                    </div>
                    <div id="calendarContainer" class="calendar-container">
                        </div>
                </div>
                
                <div class="calendar-legend">
                    <div class="legend-item">
                        <span class="legend-dot high"></span>
                        <span>높은 우선순위</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot medium"></span>
                        <span>보통 우선순위</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot low"></span>
                        <span>낮은 우선순위</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot completed"></span>
                        <span>완료됨</span>
                    </div>
                </div>
                
                <div id="editTodoModal" class="modal hidden">
                    <div class="modal-content modern-modal">
                        <div class="modal-header modern-header">
                            <div class="modal-title-wrapper">
                                <div class="modal-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M14 3.5C14.8284 2.67157 16.1716 2.67157 17 3.5C17.8284 4.32843 17.8284 5.67157 17 6.5L6.5 17L3 18L4 14.5L14 3.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <h3 class="modal-title">할 일 편집</h3>
                            </div>
                            <div class="modal-close" onclick="closeEditTodoModal()">×</div>
                        </div>
                        <div class="modal-body">
                            <form id="editTodoForm">
                                <input type="hidden" id="editTodoId">
                                <div class="form-group">
                                    <label for="editTodoTitle">제목</label>
                                    <input type="text" id="editTodoTitle" class="form-input" required>
                                </div>
                                <div class="form-group">
                                    <label for="editTodoDesc">설명</label>
                                    <textarea id="editTodoDesc" class="form-textarea"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="editTodoDueDate">마감일</label>
                                    <input type="text" id="editTodoDueDate" class="form-input date-picker">
                                </div>
                                <div class="form-group">
                                    <label for="editTodoPriority">우선순위</label>
                                    <select id="editTodoPriority" class="form-input">
                                        <option value="low">낮음</option>
                                        <option value="medium">중간</option>
                                        <option value="high">높음</option>
                                    </select>
                                </div>
                                <div class="modal-footer modern-footer">
                                    <button type="button" class="btn-secondary-modern" onclick="closeEditTodoModal()">
                                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M13.5 4.5L4.5 13.5M4.5 4.5L13.5 13.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        취소
                                    </button>
                                    <button type="button" class="btn-primary-modern" onclick="updateTodo(event)">
                                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M13.5 4.5L6 12L2.5 8.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        저장
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div id="dateModal" class="modal hidden">
                    <div class="modal-content modern-modal date-modal">
                        <div class="modal-header modern-header">
                            <div class="modal-title-wrapper">
                                <div class="modal-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8 2V6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                        <path d="M16 2V6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                        <rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                                        <path d="M3 10H21" stroke="currentColor" stroke-width="2"/>
                                        <path d="M8 14H8.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                        <path d="M12 14H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                        <path d="M16 14H16.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                        <path d="M8 18H8.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                        <path d="M12 18H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="modal-title" id="dateModalTitle">2025년 6월 23일 할 일</h3>
                                    <p class="modal-subtitle">선택한 날짜의 할 일을 확인하고 관리하세요</p>
                                </div>
                            </div>
                            <button class="close-btn-modern" onclick="closeDateModal()">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M15 5L5 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                    <path d="M5 5L15 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                </svg>
                            </button>
                        </div>
                        <div class="modal-body modern-form">
                            <div class="form-section">
                                <div id="dateModalTodos" class="date-todos-list">
                                    </div>
                            </div>
                            <div class="modal-footer modern-footer">
                                <button onclick="addTodoForDate()" class="btn-primary-modern">
                                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9 1.5V16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                        <path d="M1.5 9H16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                    이 날짜에 할 일 추가
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="todoDetailModal" class="modal hidden">
                    <div class="modal-content modern-modal todo-detail-modal">
                        <div class="modal-header modern-header todo-detail-header">
                            <div class="modal-title-wrapper">
                                <div class="modal-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9 11L12 14L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="modal-title" id="todoDetailTitle">할 일 상세보기</h3>
                                    <p class="modal-subtitle">할 일의 상세 정보와 댓글을 확인하세요</p>
                                </div>
                            </div>
                            <button class="close-btn-modern" onclick="closeTodoDetailModal()">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M15 5L5 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                    <path d="M5 5L15 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                </svg>
                            </button>
                        </div>
                        <div class="modal-body todo-detail-body">
                            <div class="todo-detail-layout">
                                <div class="todo-detail-info">
                                    <div id="todoDetailContent" class="todo-detail-content">
                                        </div>
                                    <div class="todo-action-buttons">
                                        <button id="todoStatusBtn" onclick="toggleTodoStatusFromDetail()" class="btn-primary-modern">
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M14.25 4.5L6.75 12L3.75 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            상태 변경
                                        </button>
                                        <button onclick="editTodoFromDetail()" class="btn-secondary-modern">
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M10.5 2.25C10.8978 1.85218 11.4374 1.62868 12 1.62868C12.2786 1.62868 12.5544 1.68355 12.8118 1.79022C13.0692 1.89689 13.303 2.05301 13.5 2.25C13.697 2.44699 13.8531 2.6808 13.9598 2.93819C14.0665 3.19558 14.1213 3.47142 14.1213 3.75C14.1213 4.02858 14.0665 4.30442 13.9598 4.56181C13.8531 4.8192 13.697 5.05301 13.5 5.25L5.25 13.5L1.5 14.25L2.25 10.5L10.5 2.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            편집
                                        </button>
                                        <button onclick="deleteTodoFromDetail()" class="btn-delete-modern">
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M2.25 4.5H15.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                                <path d="M7.5 1.5H10.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                                <path d="M14.25 4.5V15C14.25 15.75 13.5 16.5 12.75 16.5H5.25C4.5 16.5 3.75 15.75 3.75 15V4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                            </svg>
                                            삭제
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="todo-comments-section">
                                    <div class="comments-header">
                                        <h4 class="comments-title">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M18 10C18 14.4183 14.4183 18 10 18L4 18L10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M10 6V10L13 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            댓글
                                        </h4>
                                        <span id="commentCount" class="comment-count-badge">0</span>
                                    </div>
                                    
                                    <div id="commentsList" class="comments-list">
                                        </div>
                                    
                                    <div class="comment-form">
                                        <div class="comment-input-container">
                                            <textarea id="commentInput" placeholder="댓글을 입력하세요..." class="comment-textarea modern-textarea"></textarea>
                                            <button onclick="addComment()" class="btn-add-comment">
                                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M14.5 1.5L6.5 9.5L3.5 6.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                </svg>
                                                댓글 추가
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="admin" class="content-section">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">👑 관리자 대시보드</h2>
                        <p class="section-subtitle">사용자 승인 및 관리를 위한 도구</p>
                    </div>
                    <div class="admin-controls">
                        <div class="admin-filters">
                            <select id="userStatusFilter" onchange="filterUsersByStatus()" class="admin-select">
                                <option value="all">모든 상태</option>
                                <option value="pending">승인 대기</option>
                                <option value="approved">승인됨</option>
                                <option value="rejected">거부됨</option>
                                <option value="suspended">정지됨</option>
                            </select>
                            <select id="userRoleFilter" onchange="filterUsersByRole()" class="admin-select">
                                <option value="all">모든 역할</option>
                                <option value="super_admin">슈퍼 관리자</option>
                                <option value="admin">관리자</option>
                                <option value="user">일반 사용자</option>
                            </select>
                            <button onclick="loadUsers()" class="btn-refresh">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1 4V10H7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M23 20V14H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M20.49 9C19.9828 7.56678 19.1209 6.2854 17.9845 5.27542C16.8482 4.26543 15.4745 3.55976 13.9917 3.22426C12.5089 2.88875 10.9652 2.93434 9.50481 3.35677C8.04437 3.77921 6.71475 4.56471 5.64 5.64L1 10M23 14L18.36 18.36C17.2853 19.4353 15.9556 20.2208 14.4952 20.6432C13.0348 21.0657 11.4911 21.1112 10.0083 20.7757C8.52547 20.4402 7.1518 19.7346 6.01547 18.7246C4.87913 17.7146 4.01717 16.4332 3.51 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                새로고침
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="admin-tabs">
                    <button class="admin-tab active" onclick="showAdminTab('users')">
                        <span class="admin-tab-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </span>
                        사용자 관리
                    </button>
                    <button class="admin-tab" onclick="showAdminTab('approvals')">
                        <span class="admin-tab-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9 11l3 3L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </span>
                        승인 요청
                    </button>
                    <button class="admin-tab" onclick="showAdminTab('action-requests')">
                        <span class="admin-tab-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M22 4L12 14.01l-3-3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                        작업 요청
                    </button>
                    <button class="admin-tab" onclick="showAdminTab('logs')">
                        <span class="admin-tab-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 3v4a1 1 0 0 0 1 1h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M17 21H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7l5 5v11a2 2 0 0 1-2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M9 9h1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M9 13h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M9 17h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </span>
                        활동 로그
                    </button>
                    <button class="admin-tab" onclick="showAdminTab('permissions')">
                        <span class="admin-tab-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="3" y="11" width="18" height="11" rx="2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <circle cx="12" cy="16" r="1" fill="currentColor"/>
                            </svg>
                        </span>
                        권한 관리
                    </button>
                    <button class="admin-tab" onclick="showAdminTab('roles')">
                        <span class="admin-tab-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                        역할 관리
                    </button>
                </div>
                
                <div id="usersTab" class="admin-tab-content active">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <h3>사용자 목록</h3>
                            <span id="userCount" class="user-count-badge">0명</span>
                        </div>
                        <div class="users-table-container">
                            <table class="users-table">
                                <thead>
                                    <tr>
                                        <th>이름</th>
                                        <th>이메일</th>
                                        <th>역할</th>
                                        <th>상태</th>
                                        <th>가입일</th>
                                        <th>승인일</th>
                                        <th>작업</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTableBody">
                                    </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="approvalsTab" class="admin-tab-content">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <h3>승인 대기 목록</h3>
                            <span id="pendingCount" class="pending-count-badge">0명</span>
                        </div>
                        <div class="approval-requests-container">
                            <div id="pendingRequests" class="approval-requests-list">
                                </div>
                        </div>
                    </div>
                </div>
                
                <div id="logsTab" class="admin-tab-content">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <h3>관리자 활동 로그</h3>
                        </div>
                        <div class="admin-logs-container">
                            <div id="adminLogsList" class="admin-logs-list">
                                </div>
                        </div>
                    </div>
                </div>
                
                <div id="permissionsTab" class="admin-tab-content">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <h3>네비게이션 탭 권한 관리</h3>
                            <p class="subtitle">각 역할이 접근할 수 있는 네비게이션 탭을 관리합니다.</p>
                        </div>
                        <div class="permissions-container">
                            <div class="role-tabs" id="permRoleTabs">
                                <button class="role-tab active" onclick="showTabPermissions('super_admin')">슈퍼관리자</button>
                                <button class="role-tab" onclick="showTabPermissions('admin')">관리자</button>
                                <button class="role-tab" onclick="showTabPermissions('user')">일반사용자</button>
                                </div>
                            
                            <div class="role-description-container">
                                <div id="super_admin_desc" class="role-description active">
                                    <h4>슈퍼관리자 역할</h4>
                                    <p>시스템 내 최고 권한을 가진 역할로, 모든 기능과 데이터에 접근할 수 있습니다.</p>
                                    <p>슈퍼관리자는 다른 사용자의 역할을 변경할 수 있으며, 시스템 설정을 관리할 수 있습니다.</p>
                                </div>
                                <div id="admin_desc" class="role-description">
                                    <h4>관리자 역할</h4>
                                    <p>일반 관리 기능을 수행할 수 있는 역할로, 사용자 관리 및 컨텐츠 관리 권한을 가집니다.</p>
                                    <p>관리자는 사용자 승인 및 워크스페이스 관리 등의 권한을 가지지만, 시스템 설정 변경은 제한됩니다.</p>
                                </div>
                                <div id="user_desc" class="role-description">
                                    <h4>일반사용자 역할</h4>
                                    <p>기본적인 서비스 이용 권한을 가진 역할입니다.</p>
                                    <p>자신의 할일과 프로젝트를 관리할 수 있으며, 워크스페이스 생성 권한을 가집니다.</p>
                                </div>
                                </div>
                            
                            <div class="tab-permissions-container">
                                <h4>네비게이션 탭 접근 권한</h4>
                                <p class="permission-info">역할에 따라 접근 가능한 네비게이션 탭을 설정합니다. 체크된 항목만 사용할 수 있습니다.</p>
                                
                                <div class="tab-permissions-list" id="tabPermissionsList">
                                    <div class="loading-spinner">권한 정보를 불러오는 중...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="action-requestsTab" class="admin-tab-content">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <h3>작업 요청 관리</h3>
                            <p class="subtitle">사용자 관리 작업의 요청, 검토, 승인을 관리합니다.</p>
                        </div>
                        
                        <div class="admin-filters">
                            <div class="filter-group">
                                <label for="actionRequestStatusFilter">상태:</label>
                                <select id="actionRequestStatusFilter" onchange="loadActionRequests()">
                                    <option value="all">전체</option>
                                    <option value="pending" selected>대기 중</option>
                                    <option value="approved">승인됨</option>
                                    <option value="rejected">거부됨</option>
                                    <option value="cancelled">취소됨</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="actionTypeFilter">작업 유형:</label>
                                <select id="actionTypeFilter" onchange="loadActionRequests()">
                                    <option value="all">전체</option>
                                    <option value="approve">사용자 승인</option>
                                    <option value="reject">사용자 거부</option>
                                    <option value="suspend">계정 정지</option>
                                    <option value="promote">관리자 승격</option>
                                    <option value="demote">관리자 해제</option>
                                    <option value="change_role">역할 변경</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="action-requests-container">
                            <h4>작업 요청 목록 <span id="actionRequestsCount" class="count-badge">0개</span></h4>
                            <div id="actionRequestsList" class="action-requests-list">
                                <div class="loading-spinner">작업 요청을 불러오는 중...</div>
                            </div>
                        </div>
                        
                        <div id="reviewActionModal" class="modal">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h3>작업 요청 검토</h3>
                                    <span class="close" onclick="closeReviewActionModal()">&times;</span>
                                </div>
                                <div class="modal-body">
                                    <div id="reviewActionDetails">
                                        </div>
                                    <div class="form-group">
                                        <label for="reviewNotes">검토 의견:</label>
                                        <textarea id="reviewNotes" class="form-control" rows="3" placeholder="승인/거부 사유를 입력하세요"></textarea>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn-secondary-modern" onclick="closeReviewActionModal()">
                                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M13.5 4.5L4.5 13.5M4.5 4.5L13.5 13.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        취소
                                    </button>
                                    <button class="btn-danger" onclick="reviewAction('rejected')">
                                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M13.5 4.5L4.5 13.5M4.5 4.5L13.5 13.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        거부
                                    </button>
                                    <button class="btn-primary-modern" onclick="reviewAction('approved')">
                                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M13.5 4.5L6 12L2.5 8.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        승인
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="rolesTab" class="admin-tab-content">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <h3>역할 관리</h3>
                            <p class="subtitle">시스템의 모든 역할을 관리하고 새로운 커스텀 역할을 생성합니다.</p>
                        </div>
                        <div class="roles-container">
                            <div class="roles-actions">
                                <button class="action-btn add-btn" onclick="openCreateRoleModal()">
                                    <i class="fas fa-plus"></i> 새 역할 생성
                                </button>
                            </div>
                            
                            <div class="roles-list-container">
                                <h4>시스템 역할</h4>
                                <div class="roles-list" id="systemRolesList">
                                    <div class="loading-spinner">역할 정보를 불러오는 중...</div>
                                </div>
                                
                                <h4 class="mt-4">커스텀 역할</h4>
                                <div class="roles-list" id="customRolesList">
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="deleteRoleModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>역할 삭제</h3>
                            <span class="close" onclick="closeDeleteRoleModal()">&times;</span>
                        </div>
                        <div class="modal-body">
                            <p>정말로 <span id="deleteRoleName" class="highlight"></span> 역할을 삭제하시겠습니까?</p>
                            <p class="warning">이 작업은 되돌릴 수 없으며, 해당 역할을 사용 중인 사용자가 있으면 삭제할 수 없습니다.</p>
                        </div>
                        <div class="modal-footer">
                            <button class="btn-secondary-modern" onclick="closeDeleteRoleModal()">
                                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13.5 4.5L4.5 13.5M4.5 4.5L13.5 13.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                취소
                            </button>
                            <button class="btn-danger" onclick="confirmDeleteRole()">
                                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M2.5 5h13M7 8.5v3M11 8.5v3M3.5 5l.5 9.5c0 .5.5 1 1 1h7c.5 0 1-.5 1-1L13.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                삭제
                            </button>
                        </div>
                    </div>
                </div>
                
                <div id="createRoleModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>새 역할 생성</h3>
                            <span class="close" onclick="closeCreateRoleModal()">&times;</span>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="roleNameInput">역할 이름:</label>
                                <input type="text" id="roleNameInput" class="form-control" placeholder="영문 소문자, 숫자, 언더스코어(_)만 사용 가능">
                                <small class="form-text">예: custom_manager, support_staff</small>
                            </div>
                            <div class="form-group">
                                <label for="roleDescInput">역할 설명:</label>
                                <textarea id="roleDescInput" class="form-control" rows="3" placeholder="역할에 대한 설명을 입력하세요"></textarea>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn-secondary-modern" onclick="closeCreateRoleModal()">
                                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13.5 4.5L4.5 13.5M4.5 4.5L13.5 13.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                취소
                            </button>
                            <button class="btn-primary-modern" onclick="createNewRole()">
                                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9 1.5V16.5M1.5 9H16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                역할 생성
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="admin-card">
                    <div class="admin-card-header">
                        <h3>관리자 활동 로그</h3>
                    </div>
                    <div class="admin-logs-container">
                        <div id="adminLogs" class="admin-logs-list">
                            </div>
                    </div>
                </div>
            </div>
            </div>

            <div id="notifications" class="content-section">
                <h2 class="section-title">🔔 알림</h2>
                <p class="section-subtitle">중요한 업데이트를 놓치지 마세요</p>
                <div id="notificationList">
                    </div>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <div id="createProjectModal" class="modal hidden">
        <div class="modal-content modern-modal">
            <div class="modal-header modern-header">
                <div class="modal-title-wrapper">
                    <div class="modal-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="modal-title">새 프로젝트 만들기</h3>
                        <p class="modal-subtitle">팀과 함께할 새로운 프로젝트를 시작하세요</p>
                    </div>
                </div>
                <button class="close-btn-modern" onclick="hideCreateProjectModal()">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 5L5 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M5 5L15 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            
            <form onsubmit="createProject(event)" class="modern-form flex-column">
                <div class="flex-auto">
                    <div class="form-section">
                        <div class="input-group">
                            <label for="projectName" class="input-label">
                                <span class="label-text">프로젝트 이름</span>
                                <span class="label-required">*</span>
                            </label>
                            <input 
                                type="text" 
                                id="projectName" 
                                name="name" 
                                placeholder="예: 웹사이트 리뉴얼, 모바일 앱 개발"
                                required 
                                maxlength="50"
                                class="modern-input"
                            >
                        </div>
                        
                        <div class="input-group">
                            <label for="projectDescription" class="input-label">
                                <span class="label-text">프로젝트 설명</span>
                                <span class="label-optional">선택사항</span>
                            </label>
                            <textarea 
                                id="projectDescription" 
                                name="description" 
                                placeholder="프로젝트의 목표와 주요 내용을 간단히 설명해주세요"
                                rows="3"
                                maxlength="200"
                                class="modern-textarea"
                            ></textarea>
                            <div class="character-count">
                                <span id="descriptionCount">0</span>/200
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <label class="input-label">
                            <span class="label-text">프로젝트 색상</span>
                            <span class="label-description">프로젝트를 구분하기 위한 색상을 선택하세요</span>
                        </label>
                        <div class="color-grid">
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#3b82f6" checked>
                            <div class="color-swatch" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">블루</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#10b981">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #10b981, #047857);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">그린</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#f59e0b">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">오렌지</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#ef4444">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">레드</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#8b5cf6">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">퍼플</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#06b6d4">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">시안</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#84cc16">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #84cc16, #65a30d);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">라임</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#ec4899">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #ec4899, #db2777);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">핑크</span>
                            </div>
                        </label>
                    </div>
                </div>
                </div>
                
                <div class="modal-footer modern-footer flex-shrink-0">
                    <button type="button" class="btn-secondary-modern" onclick="hideCreateProjectModal()">
                        취소
                    </button>
                    <button type="submit" class="btn-primary-modern">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 1.5V16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M1.5 9H16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        프로젝트 만들기
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div id="editProjectModal" class="modal hidden">
        <div class="modal-content modern-modal">
            <div class="modal-header modern-header">
                <div class="modal-title-wrapper">
                    <div class="modal-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 20H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M16.5 3.5C16.8978 3.10218 17.4374 2.87868 18 2.87868C18.2786 2.87868 18.5544 2.93355 18.8118 3.04022C19.0692 3.14689 19.303 3.30301 19.5 3.5C19.697 3.69699 19.8531 3.9308 19.9598 4.18819C20.0665 4.44558 20.1213 4.72142 20.1213 5C20.1213 5.27858 20.0665 5.55442 19.9598 5.81181C19.8531 6.0692 19.697 6.30301 19.5 6.5L7 19L3 20L4 16L16.5 3.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="modal-title">프로젝트 수정</h3>
                        <p class="modal-subtitle">프로젝트 정보를 업데이트하세요</p>
                    </div>
                </div>
                <button class="close-btn-modern" onclick="hideEditProjectModal()">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 5L5 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M5 5L15 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            
            <form onsubmit="updateProject(event)" class="modern-form">
                <input type="hidden" id="editProjectId" name="id">
                
                <div class="form-section">
                    <div class="input-group">
                        <label for="editProjectName" class="input-label">
                            <span class="label-text">프로젝트 이름</span>
                            <span class="label-required">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="editProjectName" 
                            name="name" 
                            required 
                            maxlength="50"
                            class="modern-input"
                        >
                    </div>
                    
                    <div class="input-group">
                        <label for="editProjectDescription" class="input-label">
                            <span class="label-text">프로젝트 설명</span>
                            <span class="label-optional">선택사항</span>
                        </label>
                        <textarea 
                            id="editProjectDescription" 
                            name="description" 
                            rows="3"
                            maxlength="200"
                            class="modern-textarea"
                            placeholder="프로젝트의 목표와 주요 내용을 간단히 설명해주세요"
                        ></textarea>
                        <div class="character-count">
                            <span id="editDescriptionCount">0</span>/200
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <label class="input-label">
                        <span class="label-text">프로젝트 색상</span>
                        <span class="label-description">프로젝트를 구분하기 위한 색상을 선택하세요</span>
                    </label>
                    <div class="color-grid">
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#3b82f6">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">블루</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#10b981">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #10b981, #047857);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">그린</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#f59e0b">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">오렌지</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#ef4444">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">레드</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#8b5cf6">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">퍼플</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#06b6d4">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">시안</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#84cc16">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #84cc16, #65a30d);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">라임</span>
                            </div>
                        </label>
                        
                        <label class="color-option-modern">
                            <input type="radio" name="color" value="#ec4899">
                            <div class="color-swatch" style="background: linear-gradient(135deg, #ec4899, #db2777);">
                                <div class="color-check">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <span class="color-label">핑크</span>
                            </div>
                        </label>
                    </div>
                </div>
                
                <div class="modal-footer modern-footer modern-footer-with-delete">
                    <button type="button" class="btn-delete-modern" onclick="confirmDeleteProject()">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.25 4.5H15.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <path d="M7.5 1.5H10.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <path d="M14.25 4.5V15C14.25 15.75 13.5 16.5 12.75 16.5H5.25C4.5 16.5 3.75 15.75 3.75 15V4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        삭제
                    </button>
                    <div class="button-group">
                        <button type="button" class="btn-secondary-modern" onclick="hideEditProjectModal()">
                            취소
                        </button>
                        <button type="submit" class="btn-primary-modern">
                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13.5 4.5L6 12L2.5 8.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            수정 완료
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>